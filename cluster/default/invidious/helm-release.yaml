---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: invidious
  namespace: default
spec:
  releaseName: invidious
  interval: 5m
  chart:
    spec:
      chart: /kubernetes
      version: 1.2.0
      sourceRef:
        kind: GitRepository
        name: invidious-charts-git
        namespace: flux-system
      interval: 5m
  values:
    image:
      repository: quay.io/invidious/invidious
      tag: latest
      pullPolicy: Always
    nameOverride: invidious

    postgresql:
      persistence:
        enabled: true
        storageClass: "rook-ceph-block"
        size: 8Gi
      primary:
        podAnnotations:
          backup.velero.io/backup-volumes: data

---
# NOTE: originServerName removed - envoy gateway uses SNI to match listeners,
# so cloudflared must use the actual hostname (e.g., hass.roswellian.dev) not
# a fixed value, otherwise envoy returns 404 (route_not_found)
# originRequest:
#   originServerName: "external.${SECRET_DOMAIN}"

ingress:
  - hostname: "${SECRET_DOMAIN}"
    service: https://envoy-external.network.svc.cluster.local:443
    originRequest:
      noTLSVerify: true
  - hostname: "*.${SECRET_DOMAIN}"
    service: https://envoy-external.network.svc.cluster.local:443
    originRequest:
      noTLSVerify: true
  - service: http_status:404

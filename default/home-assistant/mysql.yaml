apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: hass-mysql
  namespace: default
  annotations:
    fluxcd.io: "false"
    fluxcd.io: semver:~5.7
spec:
  releaseName: hass-mysql
  chart:
    repository: https://kubernetes-charts.storage.googleapis.com/
    name: mysql
    version: 1.4.0
  values:
    image: "mysql"
    imageTag: "5.7.25"
    mysqlUser: "homeassistant"
    mysqlDatabase: "homeassistant"
    persistence:
      enabled: true
      accessMode: ReadWriteOnce
      size: 10Gi
      storageClass: "rook-ceph-block"
    metrics:
      enabled: true
    resources:
      limits:
        memory: 410771395
      requests:
        cpu: 12m
        memory: 410771395
  valueFileSecrets:
  - name: "mysql-helm-values"
